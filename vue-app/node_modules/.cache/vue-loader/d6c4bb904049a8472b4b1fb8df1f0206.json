{"remainingRequest":"/Users/xay/MovieTicketSystem/vue-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xay/MovieTicketSystem/vue-app/src/components/layout/Header.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xay/MovieTicketSystem/vue-app/src/components/layout/Header.vue","mtime":1681458252510},{"path":"/Users/xay/MovieTicketSystem/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":1681457359149},{"path":"/Users/xay/MovieTicketSystem/vue-app/node_modules/vue-loader/lib/index.js","mtime":1681457360544}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7ZmluZEJ5SWR9IGZyb20gIkAvYXBpL3VzZXIiOwppbXBvcnQgY29uZmlnIGZyb20gIkAvY29uZmlnIjsKaW1wb3J0IHtTZWFyY2hGaWxtfSBmcm9tICJAL2FwaS9maWxtIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSGVhZGVyIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNMb2dpbjogZmFsc2UsCiAgICAgIHNlYXJjaExpc3Q6IFtdLAogICAgICBzdGF0ZTogJycsCiAgICAgIHRpbWVvdXQ6IG51bGwsCiAgICAgIHVzZXI6IHt9LAogICAgfQogIH0sCgogIG1vdW50ZWQoKSB7CiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVpZCIpICE9PSBudWxsKSB7CiAgICAgIGZpbmRCeUlkKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1aWQiKSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuaXNMb2dpbiA9IHRydWU7CiAgICAgICAgdGhpcy51c2VyID0gcmVzLmRhdGE7CiAgICAgIH0pCiAgICB9CiAgfSwKCiAgbWV0aG9kczogewoKICAgIHF1ZXJ5U2VhcmNoQXN5bmMocXVlcnlTdHJpbmcsIGNiKSB7CiAgICAgIGlmIChxdWVyeVN0cmluZykgewogICAgICAgIFNlYXJjaEZpbG0ocXVlcnlTdHJpbmcpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICB0aGlzLnNlYXJjaExpc3QgPSByZXMuZGF0YQogICAgICAgICAgICBjYih0aGlzLmxvYWRTZWFyY2hMaXN0KCkpCiAgICAgICAgICB9LCA2MDApCiAgICAgICAgfSkKICAgICAgfQogICAgfSwKCiAgICBsb2FkU2VhcmNoTGlzdCgpIHsKICAgICAgbGV0IGFyciA9IG5ldyBBcnJheSgwKQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VhcmNoTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGFyci5wdXNoKHsKICAgICAgICAgIGlkOiB0aGlzLnNlYXJjaExpc3RbaV0uaWQsCiAgICAgICAgICB2YWx1ZTogdGhpcy5zZWFyY2hMaXN0W2ldLm5hbWUsCiAgICAgICAgfSkKICAgICAgfQogICAgICByZXR1cm4gYXJyCiAgICB9LAoKICAgIGhhbmRsZVNlbGVjdChpdGVtKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvZmlsbS9pbmZvP2ZpZD0nICsgaXRlbS5pZCkKICAgIH0sCgogICAgaGFuZGxlTG9nb3V0KCkgewogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgidWlkIikKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInRva2VuIikKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpCiAgICB9LAoKICB9LAoKfQo="},{"version":3,"sources":["Header.vue"],"names":[],"mappings":";AAiEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"Header.vue","sourceRoot":"src/components/layout","sourcesContent":["<template>\n  <div class=\"header\">\n    <div style=\"height: 70px;width: 100%\">\n      <div class=\"header-logo\">\n        <img style=\"width: 50px; height: 50px;float: left\" src=\"../../assets/img/logo.png\" alt=\"\"/>\n        <div class=\"header-logo-text\">爆米花</div>\n      </div>\n      <div class=\"header-links\">\n        <el-link href=\"/\" class=\"header-link\" :underline=\"false\">首页</el-link>\n        <el-link href=\"/films?region=全部&type=全部\" class=\"header-link\" :underline=\"false\">电影</el-link>\n        <el-link href=\"/active\" class=\"header-link\" :underline=\"false\">活动</el-link>\n        <el-link href=\"/leaving\" class=\"header-link\" :underline=\"false\">留言</el-link>\n      </div>\n\n      <div class=\"header-search\">\n        <el-autocomplete\n            style=\"width: 250px\"\n            v-model=\"state\"\n            :fetch-suggestions=\"querySearchAsync\"\n            placeholder=\"请输入电影名\"\n            @select=\"handleSelect\"\n        />\n      </div>\n\n      <el-link v-if=\"!isLogin\" href=\"/login\" style=\"float: right;padding-top: 23px;padding-right: 50px\"\n               class=\"header-link\"\n               :underline=\"false\">\n        登录\n      </el-link>\n      <el-dropdown v-if=\"isLogin\" style=\"float: right;padding-right: 10px\">\n        <el-button type=\"text\">\n          <div class=\"header-name\">{{ this.user.nickname }}\n            <i class=\"el-icon-caret-bottom\"></i>\n          </div>\n          <img alt=\"\" style=\"width: 45px;height: 45px;border-radius: 50%\" :src=\"user.avatar\">\n        </el-button>\n        <el-dropdown-menu slot=\"dropdown\">\n          <el-dropdown-item>\n            <el-link :underline=\"false\" href=\"/me/cart\" style=\"padding-right: 7px\">\n              <i style=\"font-size: 15px; padding-right: 3px\" class=\"el-icon-shopping-cart-2\"></i>购物车\n            </el-link>\n          </el-dropdown-item>\n          <el-dropdown-item>\n            <el-link :underline=\"false\" href=\"/me/order\" style=\"padding-right: 7px\">\n              <i style=\"font-size: 15px; padding-right: 3px\" class=\"el-icon-s-order\"></i>我的订单\n            </el-link>\n          </el-dropdown-item>\n          <el-dropdown-item>\n            <el-link :underline=\"false\" href=\"/me/setting\" style=\"padding-right: 7px\">\n              <i style=\"font-size: 15px; padding-right: 3px\" class=\"el-icon-user-solid\"></i>个人设置\n            </el-link>\n          </el-dropdown-item>\n          <el-dropdown-item divided>\n            <el-button type=\"text\" @click=\"handleLogout\" :underline=\"false\">\n              <i style=\"font-size: 15px; padding-right: 3px\" class=\"el-icon-switch-button\"></i>退出登录\n            </el-button>\n          </el-dropdown-item>\n        </el-dropdown-menu>\n      </el-dropdown>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport {findById} from \"@/api/user\";\nimport config from \"@/config\";\nimport {SearchFilm} from \"@/api/film\";\n\nexport default {\n  name: \"Header\",\n  data() {\n    return {\n      isLogin: false,\n      searchList: [],\n      state: '',\n      timeout: null,\n      user: {},\n    }\n  },\n\n  mounted() {\n    if (localStorage.getItem(\"uid\") !== null) {\n      findById(localStorage.getItem(\"uid\")).then(res => {\n        this.isLogin = true;\n        this.user = res.data;\n      })\n    }\n  },\n\n  methods: {\n\n    querySearchAsync(queryString, cb) {\n      if (queryString) {\n        SearchFilm(queryString).then(res => {\n          setTimeout(() => {\n            this.searchList = res.data\n            cb(this.loadSearchList())\n          }, 600)\n        })\n      }\n    },\n\n    loadSearchList() {\n      let arr = new Array(0)\n      for (let i = 0; i < this.searchList.length; i++) {\n        arr.push({\n          id: this.searchList[i].id,\n          value: this.searchList[i].name,\n        })\n      }\n      return arr\n    },\n\n    handleSelect(item) {\n      this.$router.push('/film/info?fid=' + item.id)\n    },\n\n    handleLogout() {\n      localStorage.removeItem(\"uid\")\n      localStorage.removeItem(\"token\")\n      this.$router.push('/login')\n    },\n\n  },\n\n}\n</script>\n\n<style scoped>\n.header {\n  height: 70px;\n  background: #FFFFFF;\n  box-shadow: 0 2px 12px 0 rgb(0 0 0/10%);\n  border: 1px solid #EBEEF5;\n}\n\n.header-logo {\n  padding-top: 10px;\n  padding-left: 10%;\n  float: left;\n  letter-spacing: 2px;\n}\n\n.header-logo-text {\n  font-size: 30px;\n  padding-top: 3px;\n  font-weight: bolder;\n  padding-left: 15px;\n  float: left;\n  font-family: \"站酷酷黑 Regular\";\n}\n\n.header-search {\n  float: left;\n  width: 300px;\n  border-radius: 20px;\n  padding-top: 16px;\n}\n\n.header-links {\n  float: left;\n  padding-left: 50px;\n  padding-top: 23px;\n}\n\n.header-link {\n  letter-spacing: 2px;\n  font-size: 17px;\n  padding-right: 40px;\n}\n\n.header-name {\n  color: #000000;\n  float: right;\n  padding-top: 15px;\n  padding-left: 15px;\n  font-weight: bolder;\n  font-size: 15px;\n  letter-spacing: 2px;\n}\n\n>>> .el-input__inner {\n  border-radius: 20px;\n  height: 40px;\n}\n</style>\n"]}]}