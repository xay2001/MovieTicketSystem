{"remainingRequest":"/Users/xay/MovieTicketSystem/vue-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xay/MovieTicketSystem/vue-app/src/views/me/Setting.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xay/MovieTicketSystem/vue-app/src/views/me/Setting.vue","mtime":1642510434000},{"path":"/Users/xay/MovieTicketSystem/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":1681457359149},{"path":"/Users/xay/MovieTicketSystem/vue-app/node_modules/vue-loader/lib/index.js","mtime":1681457360544}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7ZmluZEJ5SWQsIHVwZGF0ZVVzZXJ9IGZyb20gIkAvYXBpL3VzZXIiOwppbXBvcnQgY29uZmlnIGZyb20gIkAvY29uZmlnIjsKCmV4cG9ydCBkZWZhdWx0IHsKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGhlYWRlcjogewogICAgICAgICJBdXRob3JpemF0aW9uIjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIikKICAgICAgfSwKICAgICAgdXBsb2FkQWN0aW9uOiBjb25maWcuQVBJX1VSTCArICcvdXBsb2FkJywKICAgICAgdXNlcjogewogICAgICAgIG5pY2tuYW1lOiAnJywKICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgZW1haWw6ICcnLAogICAgICAgIGJpcnRoZGF5OiAnJywKICAgICAgICBnZW5kZXI6ICcnLAogICAgICAgIGluZm86ICcnLAogICAgICAgIGF2YXRhcjogJycKICAgICAgfQogICAgfQogIH0sCgogIG1vdW50ZWQoKSB7CiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVpZCIpICE9PSBudWxsKSB7CiAgICAgIGZpbmRCeUlkKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1aWQiKSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMudXNlciA9IHJlcy5kYXRhOwogICAgICB9KQogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKCiAgICBvblN1Ym1pdCgpIHsKICAgICAgdXBkYXRlVXNlcih0aGlzLnVzZXIpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMudXNlciA9IHJlcy5kYXRhOwogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogJ+eUqOaIt+WfuuacrOS/oeaBr+abtOaWsOaIkOWKnyEnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIGhhbmRsZVVwbG9hZFN1Y2Nlc3MocmVzKSB7CiAgICAgIHRoaXMudXNlci5hdmF0YXIgPSByZXM7CiAgICAgIHVwZGF0ZVVzZXIodGhpcy51c2VyKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLnVzZXIgPSByZXMuZGF0YTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICflpLTlg4/kuIrkvKDmiJDlip8hJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KQogICAgfQoKICB9LAoKfQoK"},{"version":3,"sources":["Setting.vue"],"names":[],"mappings":";AA4DA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"Setting.vue","sourceRoot":"src/views/me","sourcesContent":["<template>\n  <div>\n    <h3 style=\"letter-spacing: 1px;font-weight: 400;padding-bottom: 20px\">基本设置</h3>\n\n    <div>\n      <el-form style=\"width: 350px;float: left\" label-position=\"top\" ref=\"form\" :model=\"user\" label-width=\"80px\">\n        <el-form-item style=\"padding: 0\" label=\"昵称\">\n          <el-input v-model=\"user.nickname\"></el-input>\n        </el-form-item>\n        <el-form-item style=\"padding: 0\" label=\"密码\">\n          <el-input type=\"password\" v-model=\"user.password\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\">\n          <el-radio-group v-model=\"user.gender\">\n            <el-radio label=\"男生\"></el-radio>\n            <el-radio label=\"女生\"></el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"出生年月\">\n          <el-col>\n            <el-date-picker\n                type=\"date\" placeholder=\"选择日期\"\n                v-model=\"user.birthday\"\n                value-format=\"yyyy-MM-dd\"\n                style=\"width: 100%;\"/>\n          </el-col>\n        </el-form-item>\n        <el-form-item style=\"padding: 0\" label=\"邮箱\">\n          <el-input type=\"email\" v-model=\"user.email\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"个人简介\">\n          <el-input :rows=\"5\" type=\"textarea\" v-model=\"user.info\"></el-input>\n        </el-form-item>\n        <el-form-item style=\"padding-top: 20px\">\n          <el-button type=\"primary\" @click=\"onSubmit\">更新基本信息</el-button>\n        </el-form-item>\n      </el-form>\n      <div>\n        <img style=\"padding-bottom: 10px;padding-left: 150px;width: 150px; height: 150px;\" alt=\"\"\n             :src=\"user.avatar\">\n        <el-upload\n            style=\"padding-left: 500px;letter-spacing: 1px\"\n            class=\"upload-demo\"\n            accept=\".png,.jpg\"\n            :headers=\"header\"\n            :action=\"uploadAction\"\n            :on-success=\"handleUploadSuccess\"\n            multiple\n            :limit=\"1\">\n          <el-button style=\"width: 150px\" size=\"small\" type=\"primary\">\n            <i class=\"el-icon-upload2\"></i> 点击上传\n          </el-button>\n          <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件</div>\n        </el-upload>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {findById, updateUser} from \"@/api/user\";\nimport config from \"@/config\";\n\nexport default {\n\n  data() {\n    return {\n      header: {\n        \"Authorization\": localStorage.getItem(\"token\")\n      },\n      uploadAction: config.API_URL + '/upload',\n      user: {\n        nickname: '',\n        password: '',\n        email: '',\n        birthday: '',\n        gender: '',\n        info: '',\n        avatar: ''\n      }\n    }\n  },\n\n  mounted() {\n    if (localStorage.getItem(\"uid\") !== null) {\n      findById(localStorage.getItem(\"uid\")).then(res => {\n        this.user = res.data;\n      })\n    }\n  },\n\n  methods: {\n\n    onSubmit() {\n      updateUser(this.user).then(res => {\n        if (res.success) {\n          this.user = res.data;\n          this.$message({\n            type: 'success',\n            message: '用户基本信息更新成功!'\n          });\n        }\n      })\n    },\n\n    handleUploadSuccess(res) {\n      this.user.avatar = res;\n      updateUser(this.user).then(res => {\n        if (res.success) {\n          this.user = res.data;\n          this.$message({\n            type: 'success',\n            message: '头像上传成功!'\n          });\n        }\n      })\n    }\n\n  },\n\n}\n\n</script>\n\n<style scoped>\n>>> .el-form--label-top .el-form-item__label {\n  padding: 0;\n}\n\n.el-form-item {\n  margin-bottom: 5px;\n}\n</style>"]}]}