{"remainingRequest":"/Users/xay/MovieTicketSystem/vue-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xay/MovieTicketSystem/vue-app/src/views/Leaving.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xay/MovieTicketSystem/vue-app/src/views/Leaving.vue","mtime":1642510434000},{"path":"/Users/xay/MovieTicketSystem/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":1681457359149},{"path":"/Users/xay/MovieTicketSystem/vue-app/node_modules/vue-loader/lib/index.js","mtime":1681457360544}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7ZmluZEJ5SWR9IGZyb20gIkAvYXBpL3VzZXIiOwppbXBvcnQgewogIENyZWF0ZUV2YWx1YXRlLAogIENyZWF0ZUxlYXZpbmdNZXNzYWdlLAogIExpc3RBbGxMZWF2aW5nTWVzc2FnZSwKICBMaXN0QWxsV29ya2VyLAogIExpc3RXb3JrZXJFdmFsdWF0ZQp9IGZyb20gIkAvYXBpL2xlYXZpbmciOwoKZXhwb3J0IGRlZmF1bHQgewoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNMb2dpbjogZmFsc2UsCiAgICAgIGV2YWx1YXRlOiB7CiAgICAgICAgd2lkOiAnJywKICAgICAgICB1aWQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1aWQiKSwKICAgICAgICB0eXBlOiAn6Z2e5bi45ruh5oSPJywKICAgICAgICBjb250ZW50OiAnJywKICAgICAgfSwKICAgICAgZXZhbHVhdGVMaXN0OiBbXSwKICAgICAgd29ya2VyTGlzdDogW10sCiAgICAgIGxlYXZpbmdNZXNzYWdlTGlzdDogW10sCiAgICAgIGxlYXZpbmdNZXNzYWdlOiB7CiAgICAgICAgdWlkOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidWlkIiksCiAgICAgICAgcmVwbHk6ICdudWxsJywKICAgICAgICBjb250ZW50OiAnJywKICAgICAgICBjcmVhdGVBdDogJycsCiAgICAgIH0sCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlMTogZmFsc2UsCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlMjogZmFsc2UsCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlMzogZmFsc2UsCiAgICB9CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidWlkIikpIHsKICAgICAgdGhpcy5pc0xvZ2luID0gdHJ1ZQogICAgfQogICAgTGlzdEFsbExlYXZpbmdNZXNzYWdlKCkudGhlbihyZXMgPT4gewogICAgICB0aGlzLmxlYXZpbmdNZXNzYWdlTGlzdCA9IHJlcy5kYXRhCiAgICB9KQogICAgTGlzdEFsbFdvcmtlcigpLnRoZW4ocmVzID0+IHsKICAgICAgdGhpcy53b3JrZXJMaXN0ID0gcmVzLmRhdGEKICAgIH0pCiAgfSwKCiAgbWV0aG9kczogewoKICAgIGhhbmRsZUxpc3RFdmFsdWF0ZShpdGVtKSB7CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUzID0gdHJ1ZQogICAgICBMaXN0V29ya2VyRXZhbHVhdGUoaXRlbS5pZCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuZXZhbHVhdGVMaXN0ID0gcmVzLmRhdGEKICAgICAgfSkKICAgIH0sCgogICAgaGFuZGxlRXZhbHVhdGUoaXRlbSkgewogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlMSA9IHRydWUKICAgICAgdGhpcy5ldmFsdWF0ZS53aWQgPSBpdGVtLmlkCiAgICB9LAoKICAgIGhhbmRsZUxlYXZpbmcoKSB7CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUyID0gdHJ1ZQogICAgfSwKCiAgICBzdWJtaXRFdmFsdWF0ZSgpIHsKICAgICAgQ3JlYXRlRXZhbHVhdGUodGhpcy5ldmFsdWF0ZSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZTEgPSBmYWxzZQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICfmhJ/osKLmgqjlr7nlt6XkvZzkurrlkZjkvZzlh7rnmoTor4Tku7cnLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkKICAgIH0sCgogICAgc3VibWl0TGVhdmluZygpIHsKICAgICAgQ3JlYXRlTGVhdmluZ01lc3NhZ2UodGhpcy5sZWF2aW5nTWVzc2FnZSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZTIgPSBmYWxzZQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICfmhJ/osKLmgqjlr7nlsI/lsI/nlLXlvbHnlZnkuIvnmoTlrp3otLXmhI/op4EnLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkKICAgIH0sCgogIH0sCgp9Cg=="},{"version":3,"sources":["Leaving.vue"],"names":[],"mappings":";AAqGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"Leaving.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"main\">\n\n    <el-container>\n\n      <el-aside width=\"400px\">\n        <h1 style=\"color: #FFFFFF;padding-bottom: 40px;letter-spacing: 1px\">客服人员</h1>\n        <div class=\"item\" v-for=\"(item, index) in workerList\" :key=\"index\">\n          <img class=\"av\" alt=\"\" :src=\"item.avatar\">\n          <div>\n            <div class=\"d1\">名字: {{ item.nickname }}</div>\n            <div class=\"d1\">性别: {{ item.gender }}</div>\n            <div class=\"d1\">ID: {{ item.id }}</div>\n            <div>\n              <el-button\n                  @click=\"handleListEvaluate(item)\"\n                  type=\"text\">我的评价\n              </el-button>\n              <el-button\n                  style=\"padding-left: 40px\"\n                  :disabled=\"!isLogin\"\n                  @click=\"handleEvaluate(item)\"\n                  type=\"text\">评价客服\n              </el-button>\n            </div>\n          </div>\n        </div>\n      </el-aside>\n\n      <el-main>\n        <h1 style=\"color: #FFFFFF;padding-bottom: 40px;letter-spacing: 1px\">影院留言</h1>\n        <div class=\"item2\" v-for=\"(item, index) in leavingMessageList\" :key=\"index\">\n          <div style=\"display: flex\">\n            <img class=\"av2\" :src=\"item.user.avatar\" alt=\"null\">\n            <div>\n              <div class=\"d2\">{{ item.user.nickname }}</div>\n              <div v-if=\"!item.user.nickname\" class=\"d2\">匿名用户</div>\n              <div class=\"d3\">{{ item.leavingMessage.content }}</div>\n              <div class=\"d2\">Time: {{ item.leavingMessage.createAt }}</div>\n            </div>\n          </div>\n          <div v-if=\"!item.leavingMessage.reply\" class=\"reply\">\n            <div class=\"d2\">客服回复:</div>\n            <div class=\"d3\">{{ item.leavingMessage.reply }}</div>\n          </div>\n        </div>\n        <el-button :disabled=\"!isLogin\"\n                   @click=\"handleLeaving\"\n                   class=\"btn\"\n                   type=\"success\"\n                   icon=\"el-icon-share\">\n          添加留言\n        </el-button>\n      </el-main>\n    </el-container>\n\n    <el-dialog title=\"客服评价\" :visible.sync=\"dialogFormVisible1\">\n      <el-form :model=\"evaluate\">\n        <el-form-item label=\"满意程度\" label-width=\"120px\">\n          <el-select v-model=\"evaluate.type\" placeholder=\"请选择满意程度\">\n            <el-option label=\"满意\" value=\"满意\"></el-option>\n            <el-option label=\"不满意\" value=\"不满意\"></el-option>\n            <el-option label=\"非常满意\" value=\"非常满意\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item style=\"width: 100%\" label=\"评价内容\" label-width=\"120px\">\n          <el-input type=\"textarea\" :rows=\"8\" v-model=\"evaluate.content\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible1 = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitEvaluate\">提 交 评 价</el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog title=\"添加留言\" :visible.sync=\"dialogFormVisible2\">\n      <el-input type=\"textarea\" :rows=\"8\" v-model=\"leavingMessage.content\" autocomplete=\"off\"></el-input>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible2 = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitLeaving\">提 交 留 言</el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog title=\"我的评价\" :visible.sync=\"dialogFormVisible3\">\n      <el-table :data=\"evaluateList\">\n        <el-table-column property=\"createAt\" label=\"日期\" width=\"250\"></el-table-column>\n        <el-table-column property=\"content\" label=\"评语\"></el-table-column>\n        <el-table-column property=\"type\" width=\"150\">\n          <template slot-scope=\"scope\">\n            <el-tag v-if=\"scope.row.type==='非常满意'\" type=\"success\">非常满意</el-tag>\n            <el-tag v-if=\"scope.row.type==='满意'\" type=\"info\">满意</el-tag>\n            <el-tag v-if=\"scope.row.type==='不满意'\" type=\"danger\">不满意</el-tag>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport {findById} from \"@/api/user\";\nimport {\n  CreateEvaluate,\n  CreateLeavingMessage,\n  ListAllLeavingMessage,\n  ListAllWorker,\n  ListWorkerEvaluate\n} from \"@/api/leaving\";\n\nexport default {\n\n  data() {\n    return {\n      isLogin: false,\n      evaluate: {\n        wid: '',\n        uid: localStorage.getItem(\"uid\"),\n        type: '非常满意',\n        content: '',\n      },\n      evaluateList: [],\n      workerList: [],\n      leavingMessageList: [],\n      leavingMessage: {\n        uid: localStorage.getItem(\"uid\"),\n        reply: 'null',\n        content: '',\n        createAt: '',\n      },\n      dialogFormVisible1: false,\n      dialogFormVisible2: false,\n      dialogFormVisible3: false,\n    }\n  },\n\n  mounted() {\n    if (localStorage.getItem(\"uid\")) {\n      this.isLogin = true\n    }\n    ListAllLeavingMessage().then(res => {\n      this.leavingMessageList = res.data\n    })\n    ListAllWorker().then(res => {\n      this.workerList = res.data\n    })\n  },\n\n  methods: {\n\n    handleListEvaluate(item) {\n      this.dialogFormVisible3 = true\n      ListWorkerEvaluate(item.id).then(res => {\n        this.evaluateList = res.data\n      })\n    },\n\n    handleEvaluate(item) {\n      this.dialogFormVisible1 = true\n      this.evaluate.wid = item.id\n    },\n\n    handleLeaving() {\n      this.dialogFormVisible2 = true\n    },\n\n    submitEvaluate() {\n      CreateEvaluate(this.evaluate).then(res => {\n        if (res.success) {\n          this.dialogFormVisible1 = false\n          this.$message({\n            message: '感谢您对工作人员作出的评价',\n            type: 'success'\n          });\n        }\n      })\n    },\n\n    submitLeaving() {\n      CreateLeavingMessage(this.leavingMessage).then(res => {\n        if (res.success) {\n          this.dialogFormVisible2 = false\n          this.$message({\n            message: '感谢您对小小电影留下的宝贵意见',\n            type: 'success'\n          });\n        }\n      })\n    },\n\n  },\n\n}\n</script>\n\n<style scoped>\n\n.main {\n  color: #FFFFFF;\n  padding: 40px;\n}\n\n.el-aside {\n  background-color: #242930;\n  color: #333;\n  padding: 10px 50px 40px;\n  min-height: 500px;\n}\n\n.el-main {\n  background-color: #353b43;\n  color: #333;\n  padding: 10px 70px 50px;\n  min-height: 500px;\n}\n\n.item {\n  margin-bottom: 40px;\n  padding-bottom: 10px;\n  border-bottom: 1px dashed rgba(255, 255, 255, .3);\n}\n\n.item2 {\n  padding-bottom: 60px;\n}\n\n.av {\n  width: 76px;\n  height: 76px;\n  border-radius: 38px;\n  margin-right: 20px;\n  float: left;\n}\n\n.av2 {\n  width: 60px;\n  height: 60px;\n  border-radius: 30px;\n  margin-right: 20px;\n  margin-top: 10px;\n}\n\n.d1 {\n  letter-spacing: 2px;\n  line-height: 30px;\n  color: #afbac4;\n  font-size: 14px;\n}\n\n.d2 {\n  color: #afbac4;\n  letter-spacing: 2px;\n  font-size: 14px;\n  line-height: 30px;\n}\n\n.d3 {\n  letter-spacing: 2px;\n  font-size: 15px;\n  font-weight: 400;\n  line-height: 30px;\n  color: #FFFFFF;\n}\n\n.el-button--text {\n  color: #57cc8a;\n}\n\n.btn {\n  float: right;\n  background: #57cc8a;\n  letter-spacing: 1px;\n}\n\n.reply {\n  padding-left: 75px;\n  padding-top: 15px;\n}\n\n</style>"]}]}