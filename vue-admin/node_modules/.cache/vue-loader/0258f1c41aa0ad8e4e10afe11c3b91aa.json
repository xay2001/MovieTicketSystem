{"remainingRequest":"/Users/xay/MovieTicketSystem/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xay/MovieTicketSystem/vue-admin/src/views/film/Activity.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xay/MovieTicketSystem/vue-admin/src/views/film/Activity.vue","mtime":1642510434000},{"path":"/Users/xay/MovieTicketSystem/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1681460239186},{"path":"/Users/xay/MovieTicketSystem/vue-admin/node_modules/vue-loader/lib/index.js","mtime":1681460240108}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7Q3JlYXRlQWN0aXZpdHksIERlbGV0ZUFjdGl2aXR5QnlJZCwgTGlzdEFsbEFjdGl2aXR5fSBmcm9tICJAL2FwaS9hY3Rpdml0eSI7CgpleHBvcnQgZGVmYXVsdCB7CgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwaWNrZXJPcHRpb25zOiB7CiAgICAgICAgZGlzYWJsZWREYXRlKHRpbWUpIHsKICAgICAgICAgIHJldHVybiB0aW1lLmdldFRpbWUoKSA+IERhdGUubm93KCk7CiAgICAgICAgfSwKICAgICAgICBzaG9ydGN1dHM6IFt7CiAgICAgICAgICB0ZXh0OiAn5LuK5aSpJywKICAgICAgICAgIG9uQ2xpY2socGlja2VyKSB7CiAgICAgICAgICAgIHBpY2tlci4kZW1pdCgncGljaycsIG5ldyBEYXRlKCkpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIHRleHQ6ICfmmKjlpKknLAogICAgICAgICAgb25DbGljayhwaWNrZXIpIHsKICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSAtIDM2MDAgKiAxMDAwICogMjQpOwogICAgICAgICAgICBwaWNrZXIuJGVtaXQoJ3BpY2snLCBkYXRlKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICB0ZXh0OiAn5LiA5ZGo5YmNJywKICAgICAgICAgIG9uQ2xpY2socGlja2VyKSB7CiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgLSAzNjAwICogMTAwMCAqIDI0ICogNyk7CiAgICAgICAgICAgIHBpY2tlci4kZW1pdCgncGljaycsIGRhdGUpOwogICAgICAgICAgfQogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBsaXN0OiBbXSwKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBmb3JtOiB7CiAgICAgICAgY29udGVudDogJycsCiAgICAgICAgc3RhcnRUaW1lOiAnJywKICAgICAgICBlbmRUaW1lOiAnJywKICAgICAgfSwKICAgIH0KICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5sb2FkTGlzdCgpOwogIH0sCgogIG1ldGhvZHM6IHsKCiAgICBsb2FkTGlzdCgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgTGlzdEFsbEFjdGl2aXR5KCkudGhlbihyZXMgPT4gewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5saXN0ID0gcmVzLmRhdGEKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgfSwgNzAwKQogICAgICB9KQogICAgfSwKCiAgICBzdWJtaXRBY3Rpdml0eSgpIHsKICAgICAgQ3JlYXRlQWN0aXZpdHkodGhpcy5mb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfkv53lrZjmiJDlip8hJwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmxvYWRMaXN0KCkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIGhhbmRsZURlbGV0ZShpbmRleCkgewogICAgICBEZWxldGVBY3Rpdml0eUJ5SWQodGhpcy5saXN0W2luZGV4XS5pZCkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgdGhpcy5saXN0LnNsaWNlKGluZGV4LCAxKQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMubG9hZExpc3QoKQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCgogIH0sCgp9Cg=="},{"version":3,"sources":["Activity.vue"],"names":[],"mappings":";AAgEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"Activity.vue","sourceRoot":"src/views/activity","sourcesContent":["<template>\n  <div style=\"padding: 40px\">\n    <el-button @click=\"dialogFormVisible = true\" plain>添加影院活动</el-button>\n    <el-table\n        v-loading=\"loading\"\n        :data=\"list\"\n        style=\"width: 100%;margin-top: 20px\">\n      <el-table-column\n          prop=\"startTime\"\n          label=\"开始时间\"\n          width=\"220\">\n      </el-table-column>\n      <el-table-column\n          prop=\"endTime\"\n          label=\"结束时间\"\n          width=\"220\">\n      </el-table-column>\n      <el-table-column\n          prop=\"content\"\n          label=\"活动内容\">\n      </el-table-column>\n      <el-table-column\n          prop=\"number\"\n          label=\"参加人数\">\n      </el-table-column>\n      <el-table-column width=\"150\" label=\"操作\">\n        <template slot-scope=\"props\">\n          <el-button @click=\"handleDelete(props.$index)\" size=\"small\" type=\"danger\" plain>删 除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog title=\"新增活动表单\" :visible.sync=\"dialogFormVisible\">\n      <el-form :model=\"form\">\n        <el-form-item style=\"padding-right: 100px\" label=\"开始日期\" label-width=\"120px\">\n          <el-date-picker\n              v-model=\"form.startTime\"\n              type=\"date\"\n              value-format=\"yyyy-MM-dd\"\n              placeholder=\"开始日期\">\n          </el-date-picker>\n        </el-form-item>\n        <el-form-item style=\"padding-right: 100px\" label=\"结束日期\" label-width=\"120px\">\n          <el-date-picker\n              v-model=\"form.endTime\"\n              type=\"date\"\n              value-format=\"yyyy-MM-dd\"\n              placeholder=\"结束日期\">\n          </el-date-picker>\n        </el-form-item>\n        <el-form-item style=\"padding-right: 100px\" label=\"活动内容\" label-width=\"120px\">\n          <el-input :rows=\"8\" type=\"textarea\" v-model=\"form.content\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitActivity\">确 定 保 存</el-button>\n      </div>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport {CreateActivity, DeleteActivityById, ListAllActivity} from \"@/api/activity\";\n\nexport default {\n\n  data() {\n    return {\n      pickerOptions: {\n        disabledDate(time) {\n          return time.getTime() > Date.now();\n        },\n        shortcuts: [{\n          text: '今天',\n          onClick(picker) {\n            picker.$emit('pick', new Date());\n          }\n        }, {\n          text: '昨天',\n          onClick(picker) {\n            const date = new Date();\n            date.setTime(date.getTime() - 3600 * 1000 * 24);\n            picker.$emit('pick', date);\n          }\n        }, {\n          text: '一周前',\n          onClick(picker) {\n            const date = new Date();\n            date.setTime(date.getTime() - 3600 * 1000 * 24 * 7);\n            picker.$emit('pick', date);\n          }\n        }]\n      },\n      loading: false,\n      list: [],\n      dialogFormVisible: false,\n      form: {\n        content: '',\n        startTime: '',\n        endTime: '',\n      },\n    }\n  },\n\n  mounted() {\n    this.loadList();\n  },\n\n  methods: {\n\n    loadList() {\n      this.loading = true;\n      ListAllActivity().then(res => {\n        setTimeout(() => {\n          this.list = res.data\n          this.loading = false\n        }, 700)\n      })\n    },\n\n    submitActivity() {\n      CreateActivity(this.form).then(res => {\n        if (res.success) {\n          this.dialogFormVisible = false\n          this.$message({\n            type: 'success',\n            message: '保存成功!'\n          });\n          this.loadList()\n        }\n      })\n    },\n\n    handleDelete(index) {\n      DeleteActivityById(this.list[index].id).then(res => {\n        if (res.success) {\n          this.list.slice(index, 1)\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          });\n          this.loadList()\n        }\n      })\n    },\n\n  },\n\n}\n</script>\n\n<style scoped>\n\n</style>"]}]}