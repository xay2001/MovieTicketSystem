{"remainingRequest":"/Users/xay/MovieTicketSystem/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xay/MovieTicketSystem/vue-admin/src/views/Setting.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xay/MovieTicketSystem/vue-admin/src/views/Setting.vue","mtime":1642510434000},{"path":"/Users/xay/MovieTicketSystem/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1681457359474},{"path":"/Users/xay/MovieTicketSystem/vue-admin/node_modules/vue-loader/lib/index.js","mtime":1681457360778}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBjb25maWcgZnJvbSAiQC9jb25maWciOwppbXBvcnQge0ZpbmRXb3JrZXJCeUlkLCBVcGRhdGVXb3JrZXJ9IGZyb20gIkAvYXBpL3dvcmtlciI7CgpleHBvcnQgZGVmYXVsdCB7CgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoZWFkZXI6IHsKICAgICAgICAiQXV0aG9yaXphdGlvbiI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpCiAgICAgIH0sCiAgICAgIHVwbG9hZEFjdGlvbjogY29uZmlnLkFQSV9VUkwgKyAnL3VwbG9hZCcsCiAgICAgIHdvcmtlcjogewogICAgICAgIG5pY2tuYW1lOiAnJywKICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgcGhvbmU6ICcnLAogICAgICAgIGdlbmRlcjogJycsCiAgICAgICAgYXZhdGFyOiAnJywKICAgICAgICBkZXBhcnRtZW50OiAnJywKICAgICAgfQogICAgfQogIH0sCgogIG1vdW50ZWQoKSB7CiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oInJvbGUiKSA9PT0gJ3dvcmtlcicpIHsKICAgICAgRmluZFdvcmtlckJ5SWQobG9jYWxTdG9yYWdlLmdldEl0ZW0oIndpZCIpKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy53b3JrZXIgPSByZXMuZGF0YTsKICAgICAgfSkKICAgIH0KICB9LAoKICBtZXRob2RzOiB7CgogICAgb25TdWJtaXQoKSB7CiAgICAgIFVwZGF0ZVdvcmtlcih0aGlzLndvcmtlcikudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogJ+WRmOW3peWfuuacrOS/oeaBr+abtOaWsOaIkOWKnyEnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIGhhbmRsZVVwbG9hZFN1Y2Nlc3MocmVzKSB7CiAgICAgIHRoaXMud29ya2VyLmF2YXRhciA9IHJlczsKICAgICAgVXBkYXRlV29ya2VyKHRoaXMud29ya2VyKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAn5aS05YOP5LiK5Lyg5oiQ5YqfIScKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkKICAgIH0KCiAgfSwKCn0KCg=="},{"version":3,"sources":["Setting.vue"],"names":[],"mappings":";AA6DA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"Setting.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"main\">\n    <h3 style=\"letter-spacing: 1px;font-weight: 400;padding-bottom: 20px\">基本设置</h3>\n\n    <div>\n      <el-form style=\"width: 350px;float: left\" label-position=\"top\" ref=\"form\" :model=\"worker\" label-width=\"80px\">\n        <el-form-item style=\"padding: 0\" label=\"用户名\">\n          <el-input v-model=\"worker.username\"></el-input>\n        </el-form-item>\n        <el-form-item style=\"padding: 0\" label=\"昵称\">\n          <el-input v-model=\"worker.nickname\"></el-input>\n        </el-form-item>\n        <el-form-item style=\"padding: 0\" label=\"密码\">\n          <el-input type=\"password\" v-model=\"worker.password\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\">\n          <el-radio-group v-model=\"worker.gender\">\n            <el-radio label=\"男生\"></el-radio>\n            <el-radio label=\"女生\"></el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item style=\"padding: 0\" label=\"电话号码\">\n          <el-input v-model=\"worker.phone\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"*入职部门\">\n          <el-radio-group style=\"width: 600px\" v-model=\"worker.department\">\n            <el-radio label=\"客服部\"></el-radio>\n            <el-radio label=\"运营部\"></el-radio>\n            <el-radio label=\"宣传部\"></el-radio>\n            <el-radio label=\"策划部\"></el-radio>\n            <el-radio label=\"人事部\"></el-radio>\n            <el-radio label=\"监管部\"></el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item style=\"padding-top: 20px\">\n          <el-button type=\"primary\" @click=\"onSubmit\">更新基本信息</el-button>\n        </el-form-item>\n      </el-form>\n      <div>\n        <img style=\"padding-bottom: 10px;padding-left: 150px;width: 150px; height: 150px;\" alt=\"\"\n             :src=\"worker.avatar\">\n        <el-upload\n            style=\"padding-left: 500px;letter-spacing: 1px\"\n            class=\"upload-demo\"\n            accept=\".png,.jpg\"\n            :headers=\"header\"\n            :action=\"uploadAction\"\n            :on-success=\"handleUploadSuccess\"\n            multiple\n            :limit=\"1\">\n          <el-button style=\"width: 150px\" size=\"small\" type=\"primary\">\n            <i class=\"el-icon-upload2\"></i> 点击上传\n          </el-button>\n          <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件</div>\n        </el-upload>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport config from \"@/config\";\nimport {FindWorkerById, UpdateWorker} from \"@/api/worker\";\n\nexport default {\n\n  data() {\n    return {\n      header: {\n        \"Authorization\": localStorage.getItem(\"token\")\n      },\n      uploadAction: config.API_URL + '/upload',\n      worker: {\n        nickname: '',\n        password: '',\n        phone: '',\n        gender: '',\n        avatar: '',\n        department: '',\n      }\n    }\n  },\n\n  mounted() {\n    if (localStorage.getItem(\"role\") === 'worker') {\n      FindWorkerById(localStorage.getItem(\"wid\")).then(res => {\n        this.worker = res.data;\n      })\n    }\n  },\n\n  methods: {\n\n    onSubmit() {\n      UpdateWorker(this.worker).then(res => {\n        if (res.success) {\n          this.$message({\n            type: 'success',\n            message: '员工基本信息更新成功!'\n          });\n        }\n      })\n    },\n\n    handleUploadSuccess(res) {\n      this.worker.avatar = res;\n      UpdateWorker(this.worker).then(res => {\n        if (res.success) {\n          this.$message({\n            type: 'success',\n            message: '头像上传成功!'\n          });\n        }\n      })\n    }\n\n  },\n\n}\n\n</script>\n\n<style scoped>\n\n.main {\n  padding: 50px;\n  height: 800px;\n}\n\n>>> .el-form--label-top .el-form-item__label {\n  padding: 0;\n}\n\n.el-form-item {\n  margin-bottom: 5px;\n}\n</style>"]}]}